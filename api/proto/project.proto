syntax = "proto3";

package project;

import "common.proto";

option go_package = "github.com/magomedcoder/legion/api/pb/projectpb;projectpb";

service ProjectService {
  rpc CreateProject(CreateProjectRequest) returns (CreateProjectResponse);

  rpc GetProjects(GetProjectsRequest) returns (GetProjectsResponse);

  rpc GetProject(GetProjectRequest) returns (GetProjectResponse);

  rpc AddUserToProject(AddUserToProjectRequest) returns (AddUserToProjectResponse);

  rpc GetProjectMembers(GetProjectMembersRequest) returns (GetProjectMembersResponse);

  rpc CreateTask(CreateTaskRequest) returns (CreateTaskResponse);

  rpc GetTasks(GetTasksRequest) returns (GetTasksResponse);

  rpc GetTask(GetTaskRequest) returns (GetTaskResponse);

  rpc EditTaskColumnId(EditTaskColumnIdRequest) returns (EditTaskColumnIdResponse);

  rpc EditTask(EditTaskRequest) returns (EditTaskResponse);

  rpc GetProjectColumns(GetProjectColumnsRequest) returns (GetProjectColumnsResponse);

  rpc CreateProjectColumn(CreateProjectColumnRequest) returns (CreateProjectColumnResponse);

  rpc EditProjectColumn(EditProjectColumnRequest) returns (EditProjectColumnResponse);

  rpc DeleteProjectColumn(DeleteProjectColumnRequest) returns (DeleteProjectColumnResponse);
}

message Project {
  string id = 1;
  string name = 2;
}

message Task {
  string id = 1;
  string name = 2;
  string description = 3;
  int64 created_at = 4;
  int64 assigner = 5;
  int64 executor = 6;
  string column_id = 7;
}

message CreateProjectRequest {
  string name = 1;
}

message CreateProjectResponse {
  string id = 1;
}

message GetProjectsRequest {}

message GetProjectsResponse {
  repeated Project items = 1;
}

message GetProjectRequest {
  string id = 1;
}

message GetProjectResponse {
  string id = 1;
  string name = 2;
}

message AddUserToProjectRequest {
  string project_id = 1;
  repeated int64 user_ids = 2;
}

message AddUserToProjectResponse {}

message GetProjectMembersRequest {
  string project_id = 1;
}

message GetProjectMembersResponse {
  repeated legion.User items = 1;
}

message CreateTaskRequest {
  string project_id = 1;
  string name = 2;
  string description = 3;
  int64 executor = 4;
}

message CreateTaskResponse {
  string id = 1;
}

message GetTasksRequest {
  string project_id = 1;
}

message GetTasksResponse {
  repeated Task tasks = 1;
}

message GetTaskRequest {
  string task_id = 1;
}

message GetTaskResponse {
  string id = 1;
  string name = 2;
  string description = 3;
  int64 created_at = 4;
  int64 assigner = 5;
  int64 executor = 6;
  string column_id = 7;
}

message EditTaskColumnIdRequest {
  string task_id = 1;
  string column_id = 2;
}

message EditTaskColumnIdResponse {}

message EditTaskRequest {
  string task_id = 1;
  string name = 2;
  string description = 3;
  int64 assigner = 4;
  int64 executor = 5;
}

message EditTaskResponse {}

message ProjectColumn {
  string id = 1;
  string project_id = 2;
  string title = 3;
  string color = 4;
  string status_key = 5;
  int32 position = 6;
}

message GetProjectColumnsRequest {
  string project_id = 1;
}

message GetProjectColumnsResponse {
  repeated ProjectColumn columns = 1;
}

message CreateProjectColumnRequest {
  string project_id = 1;
  string title = 2;
  string color = 3;
  string status_key = 4;
}

message CreateProjectColumnResponse {
  string id = 1;
}

message EditProjectColumnRequest {
  string id = 1;
  string title = 2;
  string color = 3;
  string status_key = 4;
  int32 position = 5;
}

message EditProjectColumnResponse {}

message DeleteProjectColumnRequest {
  string id = 1;
}

message DeleteProjectColumnResponse {}
